/**
* Copyright (c) 2022 - present TinyVue Authors.
* Copyright (c) 2022 - present Huawei Cloud Computing Technologies Co., Ltd.
*
* Use of this source code is governed by an MIT-style license.
*
* THE OPEN SOURCE SOFTWARE IN THIS PRODUCT IS DISTRIBUTED IN THE HOPE THAT IT WILL BE USEFUL,
* BUT WITHOUT ANY WARRANTY, WITHOUT EVEN THE IMPLIED WARRANTY OF MERCHANTABILITY OR FITNESS FOR
* A PARTICULAR PURPOSE. SEE THE APPLICABLE LICENSES FOR MORE DETAILS.
*
*/

@import '../base/basic-var.less';
@import '../mixins/input.less';
@import '../mixins/common.less';
@import '../custom.less';
@import './vars.less';

@textarea-prefix-cls: ~'@{css-prefix}mobile-textarea';
@input-prefix-cls: ~'@{css-prefix}mobile-input';
@input-group-prefix-cls: ~'@{css-prefix}mobile-input-group';

.@{textarea-prefix-cls} {
  .inject-Input-vars();

  position: relative;

  &__inner {
    padding: var(--tvm-textarea-padding-vertical) var(--tvm-textarea-padding-horizontal);
    font-size: var(--tvm-textarea-inner-font-size, 16px);
    font-family: var(--tvm-Input-font-family);
    color: var(--tvm-textarea-inner-text-color);
    display: block;
    resize: vertical;
    box-sizing: border-box;
    border: 1px solid #c2c2c2;
    border-radius: 8px;
    transition: border-color 0.2s cubic-bezier(0.645, 0.045, 0.355, 1);
    line-height: var(--tvm-Input-line-height);

    &.is-autosize {
      overflow: hidden;
    }

    &:hover,
    &:focus {
      outline: 0;
    }

    .placeholder(
      @color: var(--tvm-textarea-inner-placeholder-color)
    );
  }

  &__wrapper {
    display: inline-block;
    overflow: hidden;
    border: var(--tvm-Input-border-width) solid var(--tvm-Input-border-color);
    border-radius: var(--tvm-Input-radius);
  }

  &__count {
    position: absolute;
    right: var(--tvm-textarea-padding-horizontal);
    bottom: var(--tvm-textarea-padding-vertical);
    color: var(--tvm-Input-count-text-color);
    font-size: var(--tvm-Input-count-font-size);
  }

  &.is-focus &__inner {
    border-color: var(--tvm-Input-border-color-active);
    border-width: var(--tvm-Input-border-width-active);
  }

  &.is-showlimit &__inner {
    padding-bottom: calc(var(--tvm-Input-count-font-size) * 1.5 + var(--tvm-textarea-padding-vertical));
  }

  &.is-disabled {
    .@{textarea-prefix-cls}__inner {
      border-color: var(--tvm-border-color-disabled);
      background-color: var(--tvm-Input-bg-color-disabled);
      color: var(--tvm-Input-text-color-disabled);
      cursor: not-allowed;
      .placeholder(@color: var(--tvm-Input-text-color-disabled));
    }
  }

  &.is-exceed {
    &__count {
      color: var(--tvm-Input-exceed-text-color);
    }
  }
}

.@{input-prefix-cls} {
  .inject-Input-vars();

  position: relative;
  width: 100%;
  line-height: var(--tvm-Input-line-height);

  &::-webkit-scrollbar {
    z-index: 11;
    width: 6px;

    &:horizontal {
      height: 6px;
    }
  }

  &::-webkit-scrollbar-thumb {
    border-radius: 5px;
    width: 6px;
    background: #b4bccc;
  }

  &::-webkit-scrollbar-corner {
    background: #fff;
  }

  &::-webkit-scrollbar-track {
    background: #fff;
  }

  &::-webkit-scrollbar-track-piece {
    background: #fff;
    width: 6px;
  }

  &.is-focus &__wrapper {
    border-color: var(--tvm-Input-border-color-active);
    border-width: var(--tvm-Input-border-width-active);
  }

  &.is-exceed &__suffix &__count {
    color: var(--tvm-Input-exceed-text-color);
  }

  &.is-disabled {
    .@{input-prefix-cls}__wrapper {
      border-color: var(--tvm-border-color-disabled);
      background: var(--tvm-Input-bg-color-disabled);
    }

    .@{input-prefix-cls}__inner {
      cursor: not-allowed;
      color: var(--tvm-Input-text-color-disabled);
      .placeholder(@color: var(--tvm-Input-text-color-disabled));
    }

    .@{input-prefix-cls}__icon {
      cursor: not-allowed;

      &.@{css-prefix}svg {
        &,
        &:hover {
          fill: var(--tvm-Input-icon-color-disabled);
        }
      }
    }

    .@{input-prefix-cls}__prefix,
    .@{input-prefix-cls}__suffix {
      .@{css-prefix}svg {
        &,
        &:hover {
          fill: var(--tvm-Input-icon-color-disabled);
        }
      }
    }
  }

  &.@{input-group-prefix-cls}-prepend &__wrapper {
    padding-left: 0;
  }

  &.@{input-group-prefix-cls}-append &__wrapper {
    padding-right: 0;
  }

  &__wrapper {
    display: flex;
    align-items: center;
    height: var(--tvm-Input-height);
    overflow: hidden;
    border: var(--tvm-Input-border-width) solid var(--tvm-Input-border-color);
    border-radius: var(--tvm-Input-radius);
    background: var(--tvm-Input-bg-color);
  }

  &__inner {
    flex: 1;
    order: 3;
    width: 100%;
    height: 100%;
    padding: 0 var(--tvm-Input-padding-horizontal);
    font-size: var(--tvm-Input-font-size);
    font-family: var(--tvm-Input-font-family);
    color: var(--tvm-Input-text-color);
    border: 0;
    outline: 0;
    display: inline-block;
    box-sizing: border-box;
    -webkit-appearance: none;
    appearance: none;
    transition: all 0.2s cubic-bezier(0.645, 0.045, 0.355, 1);
    .placeholder(@color: var(--tvm-Input-placeholder-text-color));

    &:hover,
    &:focus,
    &:active {
      outline: 0;
    }

    &::-ms-clear {
      display: none;
      width: 0;
      height: 0;
    }
  }

  & &__clear {
    font-size: var(--tvm-Input-icon-font-size, 16px);
    cursor: pointer;
    transition: color 0.2s cubic-bezier(0.645, 0.045, 0.355, 1);

    &,
    &:hover {
      fill: var(--tvm-Input-icon-color);
    }
  }

  & &__count {
    height: 100%;
    display: inline-flex;
    color: var(--tvm-Input-count-text-color);
    font-size: var(--tvm-Input-count-font-size);

    .@{input-prefix-cls}__count-inner {
      background: var(--tvm-Input-bg-color, #fff);
      line-height: initial;
      display: inline-block;
    }
  }

  &__prefix,
  &__suffix {
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s;
    text-align: center;
  }

  &__prefix {
    padding-left: var(--tvm-Input-padding-horizontal);
    order: 2;
    transition: all 0.3s;
    font-size: var(--tvm-Input-icon-font-size);
  }

  &__suffix {
    order: 4;
    padding-right: var(--tvm-Input-padding-horizontal);
    transition: all 0.3s;

    &:hover {
      cursor: pointer;
    }
  }

  &.is-active &__inner,
  &__inner:focus {
    outline: 0;
  }

  &__icon {
    line-height: var(--tvm-Input-line-height, 30px);
    text-align: center;
    transition: all 0.3s;
    font-size: var(--tvm-Input-icon-font-size);

    &,
    &:hover {
      fill: var(--tvm-Input-icon-color);
    }

    &:after {
      content: '';
      height: 100%;
      width: 0;
      display: inline-block;
      vertical-align: middle;
    }

    .svg-operationfaild {
      &,
      &:hover {
        fill: var(--tvm-Input-icon-color);
      }
    }
  }

  &__validateIcon {
    pointer-events: none;
  }

  &-medium {
    .input-size(var(--tvm-Input-medium-height, 42px));
  }

  &-small {
    .input-size(var(--tvm-Input-small-height, 36px));
  }

  &-mini {
    .input-size(var(--tvm-Input-mini-height, 24px));
  }
}

.@{input-prefix-cls}__title {
  margin-bottom: var(--tvm-Input-title-margin-bottom);
}

.@{input-group-prefix-cls} {
  line-height: normal;
  display: inline-table;
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;

  > .@{input-prefix-cls}__inner {
    vertical-align: middle;
    display: table-cell;
  }

  &__append,
  &__prepend {
    display: flex;
    align-items: center;
    height: 100%;
    position: relative;
    white-space: nowrap;

    &:focus {
      outline: 0;
    }

    .@{css-prefix}button,
    .@{css-prefix}select {
      display: inline-block;
      margin: -10px -20px;
    }

    .@{css-prefix}button,
    .@{css-prefix}input {
      font-size: inherit;
    }

    button.@{css-prefix}button,
    div.@{css-prefix}select .@{input-prefix-cls}__inner,
    div.@{css-prefix}select:hover .@{input-prefix-cls}__inner {
      background-color: transparent;
      color: inherit;
    }
  }

  &__prepend {
    order: 1;
    padding: 0 var(--tvm-Input-prepend-padding-horizontal);
    color: var(--tvm-Input-prepend-text-color);
    background-color: var(--tvm-Input-prepend-bg-color);
  }

  &__append {
    order: 5;
    padding: 0 var(--tvm-Input-append-padding-horizontal);
    color: var(--tvm-Input-append-text-color);
    background-color: var(--tvm-Input-append-bg-color);
  }
}

.@{input-prefix-cls}__select {
  display: flex;
  align-items: center;
  width: 100%;
  height: 100%;
  background: var(--tvm-Input-bg-color, #fff);

  &-icon {
    order: 5;
    height: 20px;
    margin-right: var(--tvm-Input-padding-horizontal);
    line-height: 20px;
    width: 20px;
    font-size: 0;
    transform-origin: center center;
    transition: all linear 0.3s;

    svg {
      fill: var(--tvm-Input-icon-color);
      font-size: 20px;
      vertical-align: text-bottom;
    }
  }

  &-label {
    box-sizing: border-box;
    width: 35%;
    padding: 0 12px 0 16px;
    line-height: 1.376;
    color: #333;
    font-size: 22px;
    display: -webkit-box;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  &__error {
    width: 100%;
    position: absolute;
    overflow: hidden;
    font-size: 13px;
    color: var(--tvm-common-color-error-text-1);
    text-overflow: ellipsis;
    bottom: -36px;
    background: var(--tvm-Input-form-bg-color-error);
    border-radius: 4px;
    padding: 0px 12px;

    &.align-right {
      text-align: right;
    }

    &.align-left {
      text-align: left;
    }
  }
}

.@{css-prefix-iconfont}-loading {
  font-size: 14px;
  line-height: 1;
  vertical-align: text-top;
  animation: rotating 2s linear infinite;
}

.@{input-prefix-cls}__tips {
  margin-top: var(--tvm-Input-tips-margin-top);
  font-size: var(--tvm-Input-tips-font-size);
}

@keyframes rotating {
  0% {
    transform: rotateZ(0deg);
  }

  100% {
    transform: rotateZ(360deg);
  }
}
